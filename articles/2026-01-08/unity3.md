---
title: "Unityエフェクト3分クッキング－滝の表現"
source: "https://ics.media/entry/14945/"
publishedDate: "2017-02-14"
category: "frontend"
feedName: "ICS MEDIA"
author: "ics"
---

ICS MEDIAではUnity 5.5 ([2016年11月30日リリース](https://blogs.unity3d.com/jp/2016/11/29/unity-5-5-is-ready-for-you/))の目玉の1つである**パーティクルシステムの新機能**に注目し、新機能をふんだんに使ったエフェクトの作り方を解説します。普段Unityに触れない方でも、エフェクトの作り方を通して3DCG制作やWebGL開発のヒントにしていただければ嬉しいです。

### 今回のお題：滝の表現

  
サンプルファイルをダウンロードして、記事と照らし合わせながら進められます。各エフェクトのパラメーター設定値などはサンプルファイルを直接ご覧ください。

#### 今回紹介するテクニック

1.  **\[Trails（軌跡）\]モジュール**を使ったリボンの表現
2.  **\[Shape（シェイプ）\]モジュール**を使った滝の表現
3.  **\[Sub Emitters（子要素）\]モジュール**を使った水しぶきの表現
4.  **\[Noise（ノイズ）\]モジュール**を使った揺らぎの表現

#### サンプルファイルのダウンロード

-   [GitHub（ics-creative/150916\_effect\_samples）](https://github.com/ics-creative/150820_effect_samples)

### Trails（軌跡）モジュールを使ったリボンの表現

![](https://ics.media/entry/14945/images/170130_unity_effect01_01.png)

Unity 5.5で追加された新機能**\[Trails（軌跡）\]モジュール**を使うとパーティクルの粒子に軌跡（リボン）を付けられます。

#### リボンの作り方

![](https://ics.media/entry/14945/images/170130_unity_effect01_anime1.gif)![](https://ics.media/entry/14945/images/170130_unity_effect01_anime2.gif)

たとえば噴水の粒子の動きをパーティクルで作った後、**\[Trails（軌跡）\]モジュール**を追加すると、粒子の移動曲線に沿ったリボンを簡単に作成できます。

1.  まずはヒエラルキーウィンドウで**Particle System（パーティクルシステム）**を作成します。
2.  次にインスペクターの**\[Trails（軌跡）\]モジュール**をONにします。　※この時点でパーティクルに軌跡が追加されます。
3.  最後に**\[Renderer(レンダラー)\]モジュール**の**\[Trail Material（軌跡のマテリアル）\]**に、お好みのリボンのマテリアルを設定すれば完成です。

#### リボン作りのヒント

![](https://ics.media/entry/14945/images/170130_unity_effect01_hint01.png)

-   リボンの長さは**\[Trails（軌跡）\]モジュール**の**\[Lifetime（生存時間）\]**の値で設定しよう。
-   リボンの太さは**\[Trails（軌跡）\]モジュール**の**\[Width over Trail（軌跡の幅）\]**の値で設定しよう。
-   リボンの太さを先細りさせたいときは、**\[Width over Trail（軌跡の幅）\]**からパラメーター曲線を調整しよう。ディテールアップにオススメ。
-   リボンの曲線を滑らかにしたいときは、**\[Trails（軌跡）\]モジュール**の**\[Minimun Vertex Distance（最小頂点距離）\]**の値を小さくしよう。  
    ※リボンを構成する頂点の距離が短くなるため
-   マテリアルの**\[Tiling（タイリング）\]**プロパティを調整して、リボンの模様に変化を付けよう。

### Shape（シェイプ）モジュールによる滝の表現

![](https://ics.media/entry/14945/images/170130_unity_effect01_03.png)

#### 滝の作り方

**\[Shape（シェイプ）\]モジュール**を使い、滝に見えるようにパーティクルの放出位置を調整します。 このモジュールを利用すると、球体や立方体、さらには特定のメッシュ形状（3Dモデル）からパーティクルを放出できます。

1.  リボンのParticle Systemを選択し、**\[Shape（シェイプ）\]モジュール**の**\[Shape\]プロパティ**を**\[Edge（エッジ）\]**に切り替えます。
2.  パーティクルが一方向に噴出されるので、角度を調整します。
3.  **\[Renderer(レンダラー)\]モジュール**で水のマテリアルを設定します。
4.  水マテリアルのShaderを**\[Particle/Additive(Soft) 加算効果\]**に設定します。

### Sub Emitters（子要素）モジュールを使った水しぶきの表現

![](https://ics.media/entry/14945/images/170130_unity_effect01_05.png)

リボンを使った滝の動きができたところで、次に水しぶきの表現を追加します。今回は**\[Sub Emitters（子要素）\]モジュール**を使ってみましょう。

#### 水しぶきの作り方

リボンの子要素として水しぶきを設定し、滝のところどころで水しぶきが吹き上がる表現を作成します。

![](https://ics.media/entry/14945/images/170130_unity_effect01_anime3.gif)

1.  ヒエラルキーウィンドウで**Particle System（パーティクルシステム）**を作成します。このパーティクルが水しぶきの一塊（20粒程度のパーティクル）となります。
2.  水しぶきの一塊をイメージしながら動きを調整します。
3.  先ほど作成したリボンのパーティクルを選択し、**\[Sub Emitters（子要素）\]モジュール**に水しぶきのパーティクルを設定します。これにより親子関係が設定され、滝の各所から水しぶきが吹き上がる表現となります。

#### 水しぶき作りのヒント

![](https://ics.media/entry/14945/images/170130_unity_effect01_hint02.png)

-   **粒子の大きさにばらつき**を持たせてリアリティを出そう。
-   粒子が移動する動きを早めたいときは、パーティクルシステムの**\[Simulation Speed（シミュレーションスピード）\]**の値を上げて調整しよう。
-   粒子が消失する動きは、パーティクルシステムの**\[Size over Lifetime（生存時のサイズ変化）\]モジュール**で設定しよう。※透明度を操作するより、大きさを変える方がパフォーマンスにも優しい。

### Noise（ノイズ）モジュールを使った揺らぎの表現

![](https://ics.media/entry/14945/images/170130_unity_effect01_06.png)

**\[Noise（ノイズ）\]モジュール**を使うとパーティクルの動きに揺らぎを加えられます。今回はリボンの曲線に揺らぎをつけてみましょう。水独特のなめらかな質感を加えられます。

#### 揺らぎの作り方

揺らぎのつけ方は、**\[Noise（ノイズ）\]モジュール**をONにするだけ。いたって簡単です。

1.  作成した滝のParticle Systemを選択し、インスペクターから**\[Noise（ノイズ）\]モジュール**をONにします。
2.  ノイズの各パラメーターを調整してお好みのノイズを作成します。

#### 揺らぎ作りのヒント

![](https://ics.media/entry/14945/images/170130_unity_effect01_hint03.png)

ノイズを加える際、まずは**\[Strength（強度）\]と\[Frequency（振動数）\]のパラメーターを調整する**と良いでしょう。

-   揺らぎの大まかな形状は、**\[Strength（強度）\]パラメーター**で調整しよう。
-   揺らぎを細かくしたいときは、**\[Frequency（振動数）\]パラメーター**を大きくしよう。
-   揺らぎを特定の方向に絞りたいときは、**\[Separate Axes（XYZ軸別に調整）\]**のチェックをONにした後、各軸の値を0にするとその方向へのノイズは適用されません。値を強くするとノイズが強まります。

\[Strength（強度）\]と\[Frequency（振動数）\]を変えるとさまざまなノイズを作成できます。

![](https://ics.media/entry/14945/images/170130_unity_effect01_08.png)

### 終わりに

「[Unity公式サイトのロードマップ](https://unity3d.com/jp/unity/roadmap)」によると、**次回アップデート（2017年3月 Unity 5.6）でもパーティクルシステムの改善が予定**され、今後の発展が期待できます。  
ICS MEDIAではUnityを使ったエフェクト作成の記事を連載していく予定です。ぜひお楽しみに。

#### 参考サイト

-   [UNITY 5.5がリリースされました！ - Unity Blog](https://blogs.unity3d.com/jp/2016/11/29/unity-5-5-is-ready-for-you/)

#### エフェクト作成入門講座 (バックナンバー)

-   [Effekseer編 UVスクロールを使ったマグマエフェクトの作成](https://ics.media/entry/8674/)
-   [Effekseer編 リング描画を使った乱れ斬りエフェクトの作成](https://ics.media/entry/9270/)
-   [Effekseer編 Fカーブを使った吹雪エフェクトの作成](https://ics.media/entry/10377/)
-   [PopcornFx編 タービュランスノイズを使った花火エフェクトの作成](https://ics.media/entry/10921/)
-   [Effekseer編 UVスクロールを使ったロゴアニメーションの作成](https://ics.media/entry/11650/)
-   [Effekseer編 ゆがみ効果を使ったトランジションエフェクトの作成](https://ics.media/entry/12467/)
-   [Effekseer編 ネオン風テキストストロークアニメーション](https://ics.media/entry/12967/)