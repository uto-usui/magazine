---
title: "SourceTreeの使い方 | コミットの取り消し方法まとめ（amend, reset, revert, cherry-pick）"
source: "https://ics.media/entry/3184/"
publishedDate: "2014-10-17"
category: "frontend"
feedName: "ICS MEDIA"
author: "watanabe"
---

高機能Gitクライアントの「[SourceTreeソースツリー](https://www.atlassian.com/ja/software/sourcetree)」（無料）や「[Tower](https://www.git-tower.com/)」（有償）は導入しやすく機能が豊富なため人気があります。Gitにはコミットやプッシュだけではなくさまざまな機能が存在するので、**使いこなすことで効率よく開発を進めていけるでしょう**。本記事ではGitを使う上で必須となる**commitコミットの取り消し方法**をテーマに、次の4つの機能を解説します。

-   コミットの修正・やり直し（amend）
-   コミットの取り消し（reset）
-   コミットの打ち消し（revert）
-   別ブランチからのコミットの取り込み（cherry-pick）

本記事では次の機能をSourceTreeとTowerの両方のソフトウェアの操作方法として解説します。

### コミットの修正・やり直し

コミット後に「コミット漏れのファイルがあった・・」「コメントを間違えたので修正したい」など困ったことはありませんか？リモートリポジトリにPUSHする前であれば、`git commit --amend`コマンドを使うことで解決できます。

```
git commit --amend
```

#### SourceTreeの操作方法

［作業コピー］画面にある［コミット オプション］から［直前のコミットを上書き］にチェックを入れることで、コミットの修正ができます。チェックを入れると直前コミットのコメントが表示され、コメントの修正やファイルの追加ができるようになり「コミット」ボタンを押すことで修正が反映されます。

![](https://ics.media/entry/3184/images/200318_sourcetree_commit.png)

#### Towerの操作方法

［WorkingCopy］画面にある［Amend］というチェックボックスにチェックを入れることで、コミットの修正ができます。チェックを入れると直前コミットのコメントが表示され、コメントの修正やファイルの追加ができるようになり［Amend］ボタンを押すことで修正が反映されます。

![TowerでのAmend。チェックボックスを選択する。](https://ics.media/entry/3184/images/220317_git_amend_tower2_1.png)

コメントはそのままでファイルの追加だけをしたいという方は［WorkingCopy］画面で［Alt］ボタンを押すと［Commit］ボタンが［Amend］ボタンに切り替わるので、このままファイルを選択し［Amend］ボタンを押すことでファイルの追加が簡単にできます。

![TowerでのAmend。Altキーを押している間はAmendモードになる](https://ics.media/entry/3184/images/220317_git_amend_tower2_2.png)

### コミットの取り消し

Gitにはコミットを取り消す仕組みが用意されています。リモートリポジトリにPUSHする前であれば簡単な操作で取り消せます。コミット後に「やっぱりまだコミットはしたくない」「間違ったブランチにコミットしてしまった・・」などの場合は`git reset`コマンドを使いましょう。リモートリポジトリにPUSHしてしまった場合は、コミット履歴は残ってしまいますが、次項の「コミットの打ち消し」を使って元に戻す事ができます。

```
git reset （--soft | --mixed | --hard）
```

「git reset」コマンドには**3つのオプション**があり、用途に合わせて選ぶことができます。

-   soft  
    選択したコミットまで戻し、すべての変更をインデックスに保持したままにします。**細かいコミットをまとめたり、整理したい時**などに便利です。
-   mixed  
    選択したコミットまで戻し、インデックスはリセットされ、すべての変更はワーキングツリーに保持した状態になります。デフォルト（オプション指定なし時）のオプションになります。
-   hard  
    選択したコミットまで戻し、すべての変更を破棄します。**誤ったコミットを取り消したい時**などに便利です。

※実際に作業しているフォルダーを「ワーキングツリー」といい、修正したファイルをコミットする前の状態を保持している領域（コミットするためにツール上でファイルを選択した状態）を「インデックス」といいます。

#### SourceTreeの操作方法

コミット履歴の一覧からもとに戻りたい位置のコミットを右クリックし［ XXXXX をこのコミットまで戻す］を選択します。すると、「soft」「mixed」「hard」の3つのオプションを選ぶ画面が出てくるので、実行したいモードを選択して実行してください。

![](https://ics.media/entry/3184/images/200318_sourcetree_commitcancel.png)

#### Towerの操作方法

コミット履歴の一覧からもとに戻りたい位置のコミットを右クリックし［Reset HEAD to “XXXXXXXX”］を選択します。すると、「Keep Changes」するかどうかのチェックボックスが表示されますので、「mixed」オプションで実行したい場合はチェックを入れたまま、「hard」オプションで実行したい場合はチェックを外して実行してください。

![Towerでのリセット](https://ics.media/entry/3184/images/220317_git_reset_tower.png)

### コミットの打ち消し

コミット取り消したいがリモートリポジトリにPUSHしてしまったという方は`git revert`コマンドを利用することで、特定のコミットの変更を元に戻す事ができます。ただし、`git reset`コマンドと違い、**もとに戻す（なかった事にする）訳ではなく、打ち消す（修正を元に戻すコミットを行う）コマンド**になります。そのため、リモートリポジトリにPUSHしてしまった後でも、修正をもとに戻すことが可能となります。

```
git revert
```

#### SourceTreeの操作方法

コミット履歴の一覧から元に戻したいコミットを右クリックし［コミット適用前に戻す…］を選択すると、選択したコミットを打ち消す内容がコミットされます。問題がなければPUSHすることでリモートリポジトリに反映できます。

![](https://ics.media/entry/3184/images/200318_sourcetree_commitdelete.png)

#### Towerの操作方法

コミット履歴の一覧から元に戻したいコミットを右クリックし［Revert “XXXXXXXX”］を選択すると、選択したコミットを打ち消す内容がコミットされます。問題がなければPUSHすることでリモートリポジトリに反映できます。

![Towerでのリバート](https://ics.media/entry/3184/images/220317_git_revert_tower.png)

### チェリーピック（コミットの取り込み）

チェリーピックとは英語で「いいとこ取り」「つまみ食い」という意味がある通り、**別ブランチの特定のコミット内容だけを現在のブランチに取り込む機能**です。コミット単位で取り込む事ができるため、別ブランチに同じ修正を反映させたいときに便利な機能です。

```
git cherry-pick（-rn）
```

#### SourceTreeの操作方法

コミット履歴の一覧から元に戻したいコミットを右クリックし［チェリーピック］を選択します。SourceTreeでは直接コミットするかのオプションは選べないため、コミットして問題ないかのダイアログが表示されますので、問題なければ実行ください。

![](https://ics.media/entry/3184/images/200318_sourcetree_cherrypick.png)

#### Towerの操作方法

コミット履歴の一覧から元に戻したいコミットを右クリックし［Cherry-Pick “XXXXXXXX”］を選択します。チェリーピックした内容をコミットするかのダイアログが表示されるので、直接コミットしたくない場合はチェックボックスにチェックを入れて（`-rn`オプション）実行します。

![Towerでのチェリーピック](https://ics.media/entry/3184/images/220317_git_cherrypick_tower.png)

### おわりに

頻繁に使う操作ではありませんが、これらの操作を覚えておくことで、**スムーズに対応できる**ようになります。また、活用することで**ムダなコミットが減り、開発効率の向上にもつながります**。

他にも便利な機能は色々ありますので、興味のある方は記事「[SourceTree入門 - 基本操作(diff, stash, tag, revert, cherry-pick)](https://ics.media/entry/1365/)」もあわせてご覧ください。

※本記事は、SourceTree 3とTower 8.0を使って作成しています。