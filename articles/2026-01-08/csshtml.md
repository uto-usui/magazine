---
title: "CSSを活用してHTMLのセマンティックエラーを指摘する方法"
source: "https://ics.media/entry/200819/"
publishedDate: "2020-08-19"
category: "frontend"
feedName: "ICS MEDIA"
author: "nishihara"
---

2020年8月19日 公開 / [株式会社ICS 西原 翼](https://ics.media/entry/staff/nishihara/)

CSSはWebページの見た目を整えるものですが、ちょっと違う使い方もできます。たとえば、予期せぬ横スクロールが発生した時、以下のようにすることで全ての要素のアウトラインが表示され、不用意にはみ出している部分が視覚的に分かりやすくなります。

```
* {
  outline: 2px solid red;
}
```

これを応用してタグの不適切な利用部分をハイライトできます。

このような不適切なタグ利用を検知して警告する**「デバッグCSS」**を作ってみました。このようなCSSをLintのようにする使い方は[#lintHTMLwithCSSのハッシュタグ](https://x.com/search?q=%23lintHTMLwithCSS)で海外でも考案されています。仕様上許可されないものは赤色で点滅、ダメではないが、やらない方がベターなものは黄色で点滅するようになっています。

当記事では下記のデモを見ながらだと理解を深めやすいので、合わせて読むことをオススメします。

-   [サンプルを別ウィンドウで開く](https://ics-creative.github.io/200819_debug_css/)
-   [コードを確認する](https://github.com/ics-creative/200819_debug_css/blob/master/docs/debug.css)

### ulタグ・olタグ・dlタグの子要素で使えるタグは限られている

`<ul>`タグ`<ol>`タグの子要素は`<li>`タグのみ許可されています。直下に`<div>`などを使うのはNGです。なお、`<dl>`タグの子要素にはグルーピングするために`<div>`タグを使うことは許可されているので、`<dl>`タグ直下で使えるのは`<dt>`、`<dd>`そして`<div>`タグになります。

**ul,ol,dlタグのNG例**

![ul,ol,dlタグのNG例](https://ics.media/entry/200819/images/debug_dl_ng.png)

### aタグの不適切な属性、あった方がよい属性

**name属性の使用**

`name`属性はHTML5で廃止されました。ページ内リンクを使う場合は`id`属性を使いましょう。

**rel属性の値に"noopener"**

`<a>`タグの属性にはいくつか注意が必要なものがあります。一つは`rel="noopener"`です。これは`target="_blank"`を指定した際に、JavaScriptの悪用を防ぐための属性です。これがない場合、遷移先から遷移元をリダイレクトさせることができてしまいます。ブラウザー側でも`noopener`の挙動をデフォルトになるように進めているので近い将来はこの属性はなくても上記問題は解決される見込みです。

**javascript:void(0)の利用**

`href`属性の値に`javascript:void(0)`を利用するのは推奨されません（記事『 [a アンカー要素 | MDN](https://developer.mozilla.org/ja/docs/Web/HTML/Element/a#onclick_events)』より）。`<a>`タグをインタラクションの要素として利用しているのであれば、`<button>`のほうが適切でしょう。`<a>`タグはアンカーの名の通り、リンクなどに使用すべきです。

![aタグハイライトの例](https://ics.media/entry/200819/images/debug_css01.png)

### imgタグにあった方がよい属性

**alt属性**

画像の`alt`属性をきちんと入力するのはアクセシビリティの観点からも重要です。何らかの事情で画像が読み込まれなかった場合に代替テキストが表示されるだけでなく、読み上げソフトが内容を読み上げるようになります。これにより、読み上げ支援が必要な人にもページの内容を伝えられます。

**width, height属性**

画像の表示横幅・縦幅を指定する`width`、`height`属性も、入れたほうがメリットがあります。入力しない場合、完全に画像が読み込まれるまでサイズが決定しないので、読み込み完了時にレイアウトがズレる原因になります。

CSSで`width: 100%; height: auto`のような指定をした場合も、`width`、`height`属性を入力しておけばその比率を計算して画像が読み込み終わるまでスペースを確保してくれます。

![imgタグハイライトの例](https://ics.media/entry/200819/images/debug_css02.png)

### ちょっと注意が必要なtimeタグの使い方

日時などを表す`<time>`タグですが、ちょっと使い方に注意が必要です。`<time>`タグには**機械（ブラウザーやコンピューター）にも日時を知らせる**という側面があるからです。次のような使い方は推奨されません。

```
<time>7月15日</time>
```

「7月15日」という表記は機械では解析できません。YYYY-MM-DD形式などで伝える必要があります。タグ内の内容をその形式に直しても良いですが、datetime属性を用いた方が自由度は高いでしょう。

```
<!-- datetime属性に機械可読な記述をする -->
<time datetime="2020-07-15">7月15日</time>

<!-- datetime属性を用いない場合はこれも可 -->
<time>2020-07-15</time>
```

このような形で記述するほうが望ましいです。そのため、`datetime`属性のない`<time>`タグには非推奨の警告を与えています。また、`datetime`属性がない場合はその内容が機械可読であるべきなので、子要素をもってはいけません。

![timeタグハイライトの例](https://ics.media/entry/200819/images/debug_css03.png)

### hgroup内に見出しタグ以外をいれてはいけない

当たり前といえば当たり前ですが、`<hgroup>`タグには`<h1>`～`<h6>`タグのみの使用が許可されています。文字通り見出しをグルーピングするためのタグです。

```
<!-- これはOK -->
<hgroup>
  <h1>メインの見出し</h1>
  <h2>～ サブタイトル ～</h2>
</hgroup>

<!-- これはNG -->
<hgroup>
  <div>
    <h1>メインの見出し</h1>
    <h2>～ サブタイトル ～</h2>
  </div>
</hgroup>
```

余談になりますが、このタグはW3C仕様では削除されましたが、WHATWG仕様では認められていたので、逆転復活したタグです。

### captionタグはtableタグの最初の要素

表にキャプションを付ける、`<caption>`タグは`<table>`タグの最初の子要素でなくてはなりません。表の下側にキャプションを配置したい場合はCSSの`caption-side: bottom`を指定しましょう。

```
<!-- たとえ表の下側に配置するにしてもNG-->
<table>
  <tbody>...</tbody>
  <caption>表のキャプション</caption>
</table>
```

正直、自分なら表にタイトル的なものをつけたい場合は`<table>`タグに縛られない見出しタグを使うと思います…。

### 古い属性・タグの使用

HTML5以降で廃止されたタグ・属性があります。たとえば`<font>`タグ`<frame>`タグ、`align`や`bgcolor`属性といったタグです。

```
<!-- 古いタグの使用はNG -->
<font size="4">フォントタグなどの古いタグ</font>

<!-- 古い属性の使用はNG -->
<span color="red">color属性などの古い属性</span>
```

古い属性に関してはCSSで代替できるので、文書構造と装飾の分離の観点からも属性に書くのはやめましょう。

デバッグCSSでは、これらのタグが使われていたらアウトラインを表示するようにしています。

![古いタグハイライトの例](https://ics.media/entry/200819/images/old_tags.png)

### 無用な改行タグの連続

余白を作るため、`<br>`タグを連続させるのは、本来の改行タグの使い方ではありません。「改行を連続させる」という意図を持っている自由詩などを除いては、`margin`や`<p>`などを用いて余白を作りましょう。

このCSSデバッグにおいてはちょっと困ったことに、`<br>`タグは大きさなどを持たないので`outline`で表示できません。そのため、連続する`<br>`には2つ目以上を`display: none`とし、非表示にすることで対応しています。空けたはずの改行がなくなっていたら、デバッグCSSが効いているか確認してください。

![改行タグ連続の例](https://ics.media/entry/200819/images/br.png)

### シンタックスエラーには非対応…

このデバッグCSSですが、明らかなシンタックスエラーには対応していません。例えば次のような誤ったHTMLを作成した場合に不都合が起こります。

```
<p>
  <div>...</div>
</p>
```

明らかに正しくないHTMLなので、ブラウザーがレンダリング時に世話を焼いていい感じにタグを勝手に閉じてしまいます。

```
<p></p>
<div>...</div>
<p></p>
```

たとえCSSで`p > div`のようなセレクタを作っても、上記CSSのような誤ったHTMLは生成されないので検知することができません。

このデバッグCSSで検知できるのは基本的に**セマンティックエラー**になります。逆にシンタックスエラーはエディターなどが機械的に指摘できるので、それを活用しましょう。

### ちょっと手を加えてよりよいWeb体験を

ここに挙げた例は、修正しなくてもサイト全体に大きな影響はありません。しかし、これらを改善することでセマンティック・アクセシビリティの向上が図られ、ユーザー体験の改善にもつながります。

見た目以外の細かいところにも気を配って、よりよいWebの世界を作っていきましょう。